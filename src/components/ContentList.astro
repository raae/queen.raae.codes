---
interface ContentItem {
  to?: string;
  href?: string;
  primary: string;
  secondary?: string;
  body?: string;
}

interface CtaItem {
  to?: string;
  href?: string;
  label: string;
}

interface Props {
  items?: ContentItem[];
  ctas?: CtaItem[];
  class?: string;
}

const { items = [], ctas = [], class: className } = Astro.props;
---

<ul class:list={["content-list list-none px-0 my-0 space-y-0", className]}>
  {
    items.map((item) => {
      const { primary, secondary, body, to, href } = item;
      const linkHref = to || href;
      const isExternal = Boolean(href);

      return (
        <li class="content-list-item relative border-0 border-b border-solid border-plum-900/10">
          <a
            href={linkHref}
            target={isExternal ? "_blank" : undefined}
            rel={isExternal ? "noreferrer" : undefined}
            class="content-list-link block py-3 no-underline text-inherit transition-colors focus:outline-hidden"
          >
            <h3
              class="content-list-title text-base my-0 font-extrabold text-plum-900"
              style="font-family: var(--font-body);"
            >
              <Fragment set:html={primary} />
              {isExternal ? (
                <svg
                  class="h-4 ml-1.5 fill-amber-600 opacity-30 inline-block translate-y-0.5"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M4.25 5.5a.75.75 0 00-.75.75v8.5c0 .414.336.75.75.75h8.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0112.75 17h-8.5A2.25 2.25 0 012 14.75v-8.5A2.25 2.25 0 014.25 4h5a.75.75 0 010 1.5h-5z"
                    clip-rule="evenodd"
                  />
                  <path
                    fill-rule="evenodd"
                    d="M6.194 12.753a.75.75 0 001.06.053L16.5 4.44v2.81a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.553l-9.056 8.194a.75.75 0 00-.053 1.06z"
                    clip-rule="evenodd"
                  />
                </svg>
              ) : (
                <span class="content-list-arrow text-amber-500 transition-transform inline-block ml-1"> â†’</span>
              )}
            </h3>
            {body && <Fragment set:html={body} />}
            {secondary && (
              <p
                class="my-0 mt-1 font-semibold text-plum-400 uppercase"
                style="font-family: var(--font-label); letter-spacing: 0.1em; font-size: 0.65rem;"
              >
                {secondary}
              </p>
            )}
          </a>
        </li>
      );
    })
  }

  {
    ctas.map((item, index) => {
      const { to, href, label } = item;
      const linkHref = to || href;
      const isExternal = Boolean(href);

      return (
        <li class:list={[index === 0 && "pt-4"]}>
          <a
            href={linkHref}
            target={isExternal ? "_blank" : undefined}
            rel={isExternal ? "noreferrer" : undefined}
            class="w-full no-underline inline-flex items-center justify-between border-2 border-solid border-plum-500 px-4 py-2 text-sm text-plum-900 font-bold shadow-xs hover:bg-amber-400/40 focus:outline-hidden focus:ring-4 focus:ring-plum-500"
            style="font-family: var(--font-label);"
          >
            {label}
            {isExternal && (
              <svg class="ml-2 -mr-1 h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path
                  fill-rule="evenodd"
                  d="M4.25 5.5a.75.75 0 00-.75.75v8.5c0 .414.336.75.75.75h8.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0112.75 17h-8.5A2.25 2.25 0 012 14.75v-8.5A2.25 2.25 0 014.25 4h5a.75.75 0 010 1.5h-5z"
                  clip-rule="evenodd"
                />
                <path
                  fill-rule="evenodd"
                  d="M6.194 12.753a.75.75 0 001.06.053L16.5 4.44v2.81a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.553l-9.056 8.194a.75.75 0 00-.053 1.06z"
                  clip-rule="evenodd"
                />
              </svg>
            )}
            {to && (
              <svg class="ml-2 -mr-1 h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path
                  fill-rule="evenodd"
                  d="M2 10a.75.75 0 01.75-.75h12.59l-2.1-1.95a.75.75 0 111.02-1.1l3.5 3.25a.75.75 0 010 1.1l-3.5 3.25a.75.75 0 11-1.02-1.1l2.1-1.95H2.75A.75.75 0 012 10z"
                  clip-rule="evenodd"
                />
              </svg>
            )}
          </a>
        </li>
      );
    })
  }
</ul>

<style>
  .content-list-link:hover .content-list-title {
    text-decoration: underline;
    text-decoration-color: var(--color-amber-500);
    text-underline-offset: 3px;
  }
  .content-list-link:hover .content-list-arrow {
    color: var(--color-plum-500);
    transform: translateX(4px);
  }
</style>
