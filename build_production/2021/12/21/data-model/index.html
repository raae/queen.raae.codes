<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="canonical" href="https://queen.raae.codes/2021/12/21/data-model">
        <meta name="description" content="Ahoy, seasoned JavaScript developers and daring dev pirates! Join our swashbuckling crew as we embark on thrilling treasure hunts unraveling the secrets of HTML, CSS, and JavaScript, all while having a blast!">
        <title>Create data relationship between TAGS and Lillian&#039;s photos of projects</title>
                <link rel="stylesheet" href="/assets/build/assets/main-BZO06M8j.css">
        <script defer type="module" src="/assets/build/assets/main-l0sNRNKZ.js"></script>
    </head>
    <body class="text-gray-900 font-sans antialiased">
        <article class="max-w-3xl mx-auto px-4 py-8">
    <header class="mb-8">
        <h1 class="text-4xl font-bold text-brown-900 mb-4">Create data relationship between TAGS and Lillian&#039;s photos of projects</h1>

        
            </header>

    <div class="prose prose-lg prose-brown max-w-none">
        <h2>My Skill Building Session:</h2>

<p><img src="./data-relationships-1-w51-2021.jpg" alt="data-relationships" /></p>

<h2>What did I do?</h2>

<p>Create data relationship between TAGS and Lillian's photos of projects.</p>

<h2>Why did I do it?</h2>

<p>To make it easier for Lillian to ship her projects to friends.</p>

<h2>How did I do it?</h2>

<p><strong>The Plan</strong></p>

<p>S - See: <code>toppings</code> are not on <code>pizzas</code> in GraphQL<br />
A - Array: Add <code>array</code> to pizza.js in Sanity</p>

<p>N - Nodes: <code>toppings</code> are now on <code>pizzas</code> in GraphQL</p>

<p>Look at these steps later:</p>

<p>I - Into my webapp with GraphQL</p>

<p>T - Treasure: TBD<br />
Y - Yeah: Toppings can be linked in my web app after copy-pasting some Wes Bos wizardry.</p>

<h2>The Steps</h2>

<h3>S - See: <code>toppings</code> are not on <code>pizzas</code> in GraphQL or in GraphiQL</h3>

<pre><code class="language-js">// ToppingsFilter.js
// How do I get a list of all the pizzas with their toppings?
const { pizzas } = useStaticQuery(graphql`
  query {
    pizzas: allSanityPizza {
      nodes {
        // üëÅÔ∏è Look no "toppings" here üëÄ
        id
      }
      slug {
        current
      }
    }
  }
}`);
</code></pre>

<h3>A - Array: Add <code>array</code> to pizza.js in Sanity</h3>

<p>I added this code to my pizza.js. in Sanity</p>

<pre><code class="language-js">// schemas/pizza.js
  {
    name: 'toppings',
    title: 'Toppings and Tools and Tags of Pirate Princess Lillian (6 üè¥‚Äç‚ò†Ô∏èüë∏)',
    type: 'array',
    of: [{ type: 'reference', to: [{ type: 'topping' }] }],
  }
</code></pre>

<h3>N - Nodes: <code>toppings</code> are now on <code>pizzas</code> in GraphQL</h3>

<p>I looked in my GraphiQL and copy-pasted the new query into ToppingsFilter.js</p>

<pre><code class="language-js">// Rubys-TimeShip/src/components/ToppingsFilter.js
// This is how do I get a list of all the Pizzas with their toppings!
const { pizzas } = useStaticQuery(graphql`
  query {
    pizzas: allSanityPizza {
      nodes {
        toppings {
          name
          id
        }
        slug {
          current
        }
        id
      }
    }
  }
`);
</code></pre>

<p>And that's enough steps for this week!</p>

<p>Pirate Princess Lillian joined me at the beginning of Sunday's <a href="https://youtu.be/ix_0vrwQnWk">skill building session on youtube</a>.</p>

<p>If you would like to see how the web app will look in the end <a href="https://youtu.be/ix_0vrwQnWk?t=1200">jump to the 20 minute mark</a>.</p>

<p>üí™üò∫üëç<br />
Keep your skill-building-submarine afloat this week!<br />
‚õµüîßüè¥‚Äç‚ò†Ô∏è</p>

<p>&nbsp;<br />
Cap'n Ola Vea</p>

<p>&nbsp;<br />
<strong>PS:</strong> If you feel like doing me a favour give me a smiley emoji comment to feed my youtube algo some vitamins.</p>

<ul>
<li><a href="https://timeship1.gatsbyjs.io/pizzas/">The web app I am working on</a></li>
<li><a href="https://youtu.be/ix_0vrwQnWk?t=1200">Direct link to the 20 minute mark in Sunday's OlaCast on YouTube</a></li>
</ul>
    </div>
</article>
    </body>
</html>
