<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="canonical" href="https://queen.raae.codes/2022/01/05/external-scripts">
        <meta name="description" content="Ahoy, seasoned JavaScript developers and daring dev pirates! Join our swashbuckling crew as we embark on thrilling treasure hunts unraveling the secrets of HTML, CSS, and JavaScript, all while having a blast!">
        <title>Third-party scripts with Gatsby</title>
                <link rel="stylesheet" href="/assets/build/assets/main-BZO06M8j.css">
        <script defer type="module" src="/assets/build/assets/main-l0sNRNKZ.js"></script>
    </head>
    <body class="text-gray-900 font-sans antialiased">
        <article class="max-w-3xl mx-auto px-4 py-8">
    <header class="mb-8">
        <h1 class="text-4xl font-bold text-brown-900 mb-4">Third-party scripts with Gatsby</h1>

        
                    <div class="mt-4 flex flex-wrap gap-2">
                                    <span class="px-3 py-1 bg-brown-100 text-brown-800 rounded-full text-sm">
                        external scripts
                    </span>
                                    <span class="px-3 py-1 bg-brown-100 text-brown-800 rounded-full text-sm">
                        screencast
                    </span>
                            </div>
            </header>

    <div class="prose prose-lg prose-brown max-w-none">
        <p>Let's say you want to embed a Tweet or add website analytics. How would you go about including the external third-party script required?</p>

<p>That was the topic for my first ever Live Screencasts â€” concise, instructional videos on a single Gatsby topic.</p>

<ul>
<li><a href="https://youtu.be/Kldx6d5XBSE">Watch the Live Screeencast</a></li>
</ul>

<p>I have found three practical ways of doing so with Gatsby.</p>

<h2>1. <code>onRenderBody</code></h2>

<p>An excellent solution for global scripts must be available on every page, such as website analytics.</p>

<p>With <code>onRenderBody</code>, the script is added when the site statically generates. The script tag is part of the initial HTML even before the site rehydrates.</p>

<ul>
<li><a href="https://www.youtube.com/watch?v=Kldx6d5XBSE&amp;t=74s">Jump in to see <code>onRenderBody</code> in action</a></li>
</ul>

<pre><code>import React from "react";

const headComponents = [
  &lt;script
    key="fathom-script"
    src="https://cdn.usefathom.com/script.js"
    data-site="CNOZPPSE"
    defer
  &gt;&lt;/script&gt;,
];

export const onRenderBody = ({setHeadComponents}) =&gt; {
  setHeadComponents(headComponents);
};
</code></pre>

<h2>2. React Helmet</h2>

<p>Using React Helmet is another method for adding the script as part of the statically generated pages. However, it makes it easy to include the script only on certain pages.</p>

<ul>
<li><a href="https://www.youtube.com/watch?v=Kldx6d5XBSE&amp;t=360s">Jump in to to see React Helmet in action</a></li>
</ul>

<pre><code>import React from "react";
import {Helmet} from "react-helmet";

const TweetPageReactHelmet = () =&gt; {
  return (
    &lt;main&gt;
      &lt;Helmet&gt;
        &lt;script async src="https://platform.twitter.com/widgets.js" /&gt;
      &lt;/Helmet&gt;

      &lt;section&gt;
        &lt;blockquote class="twitter-tweet"&gt;
          {/* ... rest of tweet embed code */}
        &lt;/blockquote&gt;{" "}
      &lt;/section&gt;
    &lt;/main&gt;
  );
};

export default TweetPageReactHelmet;
</code></pre>

<h2>3. <code>document.createElement</code></h2>

<p>Suppose you want to have more control over when a script is loaded. In that case, you can do so by manipulating the DOM inside a <code>useEffect</code> (or <code>onClick</code> or another event that makes sense...).</p>

<ul>
<li><a href="https://www.youtube.com/watch?v=Kldx6d5XBSE&amp;t=619s">Jump in to see <code>document.createElement</code> in action</a></li>
</ul>

<pre><code>import React, {useEffect} from "react";

const TweetPageCreateElement = () =&gt; {
  useEffect(() =&gt; {
    const script = document.createElement("script");
    script.src = "https://platform.twitter.com/widgets.js";
    document.head.appendChild(script);
    return () =&gt; {
      script.remove();
    };
  }, []);

  return (
    &lt;main&gt;
      &lt;section&gt;
        &lt;blockquote class="twitter-tweet"&gt;
          {/* ... rest of tweet embed code */}
        &lt;/blockquote&gt;
      &lt;/section&gt;
    &lt;/main&gt;
  );
};

export default TweetPageCreateElement;
</code></pre>

<p>&nbsp;<br />
Have you used any of these?<br />
Do you know of another way?</p>

<p>&nbsp;<br />
All the best,<br />
Queen Raae</p>
    </div>
</article>
    </body>
</html>
