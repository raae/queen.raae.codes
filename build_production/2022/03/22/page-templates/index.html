<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="canonical" href="https://queen.raae.codes/2022/03/22/page-templates">
        <meta name="description" content="Ahoy, seasoned JavaScript developers and daring dev pirates! Join our swashbuckling crew as we embark on thrilling treasure hunts unraveling the secrets of HTML, CSS, and JavaScript, all while having a blast!">
        <title>Multiple page templates for the same node type in Gatsby</title>
                <link rel="stylesheet" href="/assets/build/assets/main-HrG164mN.css">
        <script defer type="module" src="/assets/build/assets/main-l0sNRNKZ.js"></script>
    </head>
    <body class="text-gray-900 font-sans antialiased">
        <article class="max-w-3xl mx-auto px-4 py-8">
    <header class="mb-8">
        <h1 class="text-4xl font-bold text-brown-900 mb-4">Multiple page templates for the same node type in Gatsby</h1>

        
                    <div class="mt-4 flex flex-wrap gap-2">
                                    <span class="px-3 py-1 bg-brown-100 text-brown-800 rounded-full text-sm">
                        gatsby-source-filesystem
                    </span>
                                    <span class="px-3 py-1 bg-brown-100 text-brown-800 rounded-full text-sm">
                        page templates
                    </span>
                            </div>
            </header>

    <div class="prose prose-lg prose-brown max-w-none">
        <p>How can you achieve different page layouts for content with the same content node type but varying content types?</p>

<p>A typical example is sourcing both posts and projects content from markdown. Both posts and projects are added to the Gatsby Content Layer as MarkdownRemark Nodes. But are "logically" different content types.</p>

<p>This week we'll look at three different approaches!</p>

<p>First up is using <em>multiple page templates</em>. Tomorrow's email looks at <a href="/2022-03-23-page-components/">multiple page components</a>, and then we'll round it off with my current favorite: <a href="/2022-03-24-parrot-pages/">parrot pages</a>.</p>

<h2>Multiple Page Templates</h2>

<p>For the <em>multiple page templates</em> approach, we'll use the <code>createPages</code> extension point to create a page for each markdown file.</p>

<p>Something you probably have done before, but we'll extend on it a little and make sure it selects the correct page template for the content type:</p>

<pre><code class="language-js">// gatsby-node.js
const path = require(`path`);

exports.createPages = async (gatsbyUtils) =&gt; {
  const { actions, graphql, reporter } = gatsbyUtils;
  const { createPage } = actions;

  const { data } = await graphql(`
    {
      allMarkdownRemark {
        nodes {
          id
          fields {
            slug
          }
          parent {
            ... on File {
              sourceInstanceName
            }
          }
        }
      }
    }
  `);

  const templates = {
    post: path.resolve(`src/templates/post-template.js`),
    project: path.resolve(`src/templates/project-template.js`),
  };

  data.allMarkdownRemark.nodes.forEach((node) =&gt; {
    const contentType = node.parent.sourceInstanceName;
    createPage({
      path: contentType + node.fields.slug,
      component: templates[contentType],
      context: {
        id: node.id,
      },
    });

    reporter.info(
      `Created page for slug ${node.fields.slug} with type ${contentType}`
    );
  });
};
</code></pre>

<p>The <code>sourceInstanceName</code> used comes from configuring your <code>gatsby-source-filesystem</code> with the <code>name</code> option.</p>

<pre><code class="language-js">// gatsby-config.js
module.exports = {
  plugins: [
    {
      resolve: `gatsby-source-filesystem`,
      options: {
        name: "post",
      },
    },
    {
      resolve: `gatsby-source-filesystem`,
      options: {
        path: `${__dirname}/content/projects`,
        name: "project",
      },
    },
  ],
};
</code></pre>

<p>And the slug is created using the <code>onCreateNode</code> extention point.</p>

<pre><code class="language-js">// gatsby-node.js
const { createFilePath } = require("gatsby-source-filesystem");

exports.onCreateNode = (gatsbyUtils) =&gt; {
  const { actions, node, getNode, reporter } = gatsbyUtils;
  const { createNodeField } = actions;

  if (node.internal.type === "MarkdownRemark") {
    const slug = createFilePath({ node, getNode });

    createNodeField({
      name: "slug",
      node,
      value: slug,
    });

    reporter.info(`Create slug ${slug}`);
  }
};
</code></pre>

<p>How do you solve different page layouts for content with the same content node type but varying content types?</p>

<p>&nbsp;<br />
All the best,<br />
Queen Raae</p>
    </div>
</article>
    </body>
</html>
