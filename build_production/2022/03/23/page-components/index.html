<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="canonical" href="https://queen.raae.codes/2022/03/23/page-components">
        <meta name="description" content="Ahoy, seasoned JavaScript developers and daring dev pirates! Join our swashbuckling crew as we embark on thrilling treasure hunts unraveling the secrets of HTML, CSS, and JavaScript, all while having a blast!">
        <title>Multiple page components for the same node type in Gatsby</title>
                <link rel="stylesheet" href="/assets/build/assets/main-HrG164mN.css">
        <script defer type="module" src="/assets/build/assets/main-l0sNRNKZ.js"></script>
    </head>
    <body class="text-gray-900 font-sans antialiased">
        <article class="max-w-3xl mx-auto px-4 py-8">
    <header class="mb-8">
        <h1 class="text-4xl font-bold text-brown-900 mb-4">Multiple page components for the same node type in Gatsby</h1>

        
                    <div class="mt-4 flex flex-wrap gap-2">
                                    <span class="px-3 py-1 bg-brown-100 text-brown-800 rounded-full text-sm">
                        gatsby-source-filesystem
                    </span>
                            </div>
            </header>

    <div class="prose prose-lg prose-brown max-w-none">
        <p>How can you achieve different page layouts for content with the same content node type but varying content types?</p>

<p>In yesterday's email, we looked at a solution involving <a href="/2022-03-22-page-templates/">multiple page templates</a>. Today we'll look at achieving the same with <em>multiple page components</em>. And tomorrow we'll look at how to use <a href="/2022-03-24-parrot-pages/">parrot pages</a> by making our own MarkdownRemark parent nodes ðŸ¤¯</p>

<h2>Multiple Page Components</h2>

<p>For the <em>multiple page components</em> approach, we can create the MarkdownRemark pages using either the <code>createPages</code> extension point or the File Sytem Route API.</p>

<p>Then inside our root page component, we'll make sure to render the correct page component for our content type and pass on the queried data.</p>

<pre><code class="language-js">// src/pages/{MarkdownRemark.fields__slug}.js
import React from "react";
import { graphql } from "gatsby";

import PostTemplate from "../components/post-page";
import ProjectTemplate from "../components/project-page";

const components = {
  post: PostTemplate,
  project: ProjectTemplate,
};

const RemarkPage = ({ data, ...props }) =&gt; {
  const contentType = data.markdownRemark?.parent.sourceInstanceName;
  const Component = components[contentType]; // ðŸ‘ˆ
  return &lt;Component data={data.markdownRemark} {...props} /&gt;;
};

export default RemarkPage;

// PostFragment defineded in the ../components/post-page.js file
// ProjectFragment defined in ../components/project-page.js file
export const query = graphql`
  query ($id: String!) {
    markdownRemark(id: { eq: $id }) {
      id
      ...ProjectFragment
      ...PostFragment
      parent {
        ... on File {
          sourceInstanceName
        }
      }
    }
  }
`;
</code></pre>

<p>If GraphQL Fragments are new to you, check out the <a href="https://www.gatsbyjs.com/docs/reference/graphql-data-layer/using-graphql-fragments/">Using GraphQL Fragments </a> article by Gatsby for more information.</p>

<p>Same as yesterday, the <code>sourceInstanceName</code> used comes from configuring your <code>gatsby-source-filesystem</code> with the <code>name</code> option.</p>

<pre><code class="language-js">// gatsby-config.js
module.exports = {
  plugins: [
    {
      resolve: `gatsby-source-filesystem`,
      options: {
        path: `${__dirname}/content/posts`,
        name: "post",
      },
    },
    {
      resolve: `gatsby-source-filesystem`,
      options: {
        path: `${__dirname}/content/projects`,
        name: "project",
      },
    },
  ],
};
</code></pre>

<p>And the slug is created using the <code>onCreateNode</code> extension point.</p>

<pre><code class="language-js">// gatsby-node.js
const { createFilePath } = require("gatsby-source-filesystem");

exports.onCreateNode = (gatsbyUtils) =&gt; {
  const { actions, node, getNode, reporter } = gatsbyUtils;
  const { createNodeField } = actions;

  if (node.internal.type === "MarkdownRemark") {
    const slug = createFilePath({ node, getNode });
    const parent = getNode(node.parent);

    createNodeField({
      name: "slug",
      node,
      value: parent.sourceInstanceName + slug,
    });

    reporter.info(`Create slug ${slug}`);
  }
};
</code></pre>

<p>How do you solve different page layouts for content with the same content node type but varying content types?</p>

<p>&nbsp;<br />
All the best,<br />
Queen Raae</p>
    </div>
</article>
    </body>
</html>
