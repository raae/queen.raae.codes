<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="canonical" href="https://queen.raae.codes/2022/02/09/options-schema">
        <meta name="description" content="Ahoy, seasoned JavaScript developers and daring dev pirates! Join our swashbuckling crew as we embark on thrilling treasure hunts unraveling the secrets of HTML, CSS, and JavaScript, all while having a blast!">
        <title>Remember to validate your Gatsby Plugin options</title>
                <link rel="stylesheet" href="/assets/build/assets/main-HrG164mN.css">
        <script defer type="module" src="/assets/build/assets/main-l0sNRNKZ.js"></script>
    </head>
    <body class="text-gray-900 font-sans antialiased">
        <article class="max-w-3xl mx-auto px-4 py-8">
    <header class="mb-8">
        <h1 class="text-4xl font-bold text-brown-900 mb-4">Remember to validate your Gatsby Plugin options</h1>

        
                    <div class="mt-4 flex flex-wrap gap-2">
                                    <span class="px-3 py-1 bg-brown-100 text-brown-800 rounded-full text-sm">
                        gatsby plugin
                    </span>
                                    <span class="px-3 py-1 bg-brown-100 text-brown-800 rounded-full text-sm">
                        gatsby-plugin-let-it-snow
                    </span>
                            </div>
            </header>

    <div class="prose prose-lg prose-brown max-w-none">
        <p>When you make a Gatsby Plugin make sure to include a schema for your options. By doing so, Gatsby will verify that the plugin is configured correctly and stop everything if it is not!</p>

<p><img src="./option-error.jpg" alt="Options Error" /></p>

<p>Users of your plugin will thank you for this immediate feedback. It saves them from reading through obscure <code>undefined</code> error messages or making sense of unexpected behavior when the reason is bad configuration.</p>

<p>Schema validation happens in the <code>gatby-node.js</code> file, using <a href="https://joi.dev">Joi</a> to describe the schema.</p>

<pre><code class="language-js">// gatsby-node.js

exports.pluginOptionsSchema = ({ Joi }) =&gt; {
  return Joi.object({
    colors: Joi.array()
      .items(Joi.string())
      .min(1)
      .default(["#fff"])
      .description("Array of hex color values"),
    intensity: Joi.string()
      .valid("regular", "light", "blizzard")
      .default("regular"),
    duration: Joi.number()
      .integer()
      .min(1)
      .default(15)
      .description("Duration of snowfall in seconds"),
    season: Joi.object()
      .keys({
        start: Joi.date().required(),
        end: Joi.date().required(),
      })
      .default({
        start: new Date("December 1"),
        end: new Date("January 4"),
      })
      .description("Start and end date for when snow should be activated"),
  });
};
</code></pre>

<p>Example lifted from <a href="https://github.com/queen-raae/gatsby-plugin-let-it-snow/blob/main/plugin/gatsby-node.js">@raae/gatsby-plugin-let-it-snow</a>.</p>

<p>&nbsp;<br />
All the best,<br />
Queen Raae</p>

<p>&nbsp;<br />
<strong>PS:</strong> Would you be interested in a course/bootcamp on Gatsby Plugins?</p>
    </div>
</article>
    </body>
</html>
